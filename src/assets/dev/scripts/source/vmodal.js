(function(){var t;t=function(){function t(t,e){this.$body=jQuery(document.body),this.$element=jQuery(t),this.$link=jQuery(e),this.isRemote=this.$link.hasClass("vmodal-remote"),this.isShown=null,this.$backdrop=null}return t.prototype.load=function(){return this.toggleModal(),jQuery(document).trigger("vmodal:loaded")},t.prototype.toggleModal=function(){return this.isShown?this.hide():this.show()},t.prototype.hide=function(){var t;return t=this,this.isShown=!1,this.$body.removeClass("vmodal-open"),this.$element.fadeOut(),this.isRemote&&t.$element.html(""),this.$backdrop.animate({opacity:"0"},400,function(){return t.$backdrop.remove()}),this.toggleListener(),jQuery(document).trigger("vmodal:hide")},t.prototype.show=function(){var t;return t=this,this.isShown=!0,this.isRemote&&$.get(this.$link.attr("href"),function(e){return t.$element.html(e)}),this.$body.addClass("vmodal-open"),this.$backdrop=jQuery('<div class="vmodal-backdrop no-show" />').appendTo(this.$body),this.$backdrop.animate({opacity:".8"}),this.$element.fadeIn(),this.toggleListener(),jQuery(document).trigger("vmodal:show")},t.prototype.toggleListener=function(){var t;return t=this,this.isShown?(this.$body.on("keyup",function(e){return 27===e.keyCode?t.hide():null}),this.$element.on("click",".close, .vmodal-close",function(e){return t.hide(),!1}),this.$element.on("click",function(e){return e.target===t.$element[0]?t.hide():void 0})):(this.$body.off("keyup"),this.$element.off("click"))},t}(),jQuery(function(){return jQuery(document).on("click","[data-toggle=vmodal]",function(e){var o;return e.preventDefault(),o=new t(jQuery(this).data("target"),this),o.load()})})}).call(this);